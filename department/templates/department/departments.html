{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
   <title>Preskool - Departments</title>

   <link rel="shortcut icon" href="{% static 'assets/img/favicon.png' %}">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap">
   <link rel="stylesheet" href="{% static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}">
   <link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
   <link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/all.min.css' %}">
   <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
</head>
<body>

<div class="main-wrapper">

   <!-- Header -->
   <div class="header">
      <div class="header-left">
         <a href="{% url 'school:index' %}" class="logo">
            <img src="{% static 'assets/img/logo.png' %}" alt="Logo">
         </a>
         <a href="{% url 'school:index' %}" class="logo logo-small">
            <img src="{% static 'assets/img/logo-small.png' %}" alt="Logo" width="30" height="30">
         </a>
      </div>
      <a href="javascript:void(0);" id="toggle_btn"><i class="fas fa-align-left"></i></a>
      <a class="mobile_btn" id="mobile_btn"><i class="fas fa-bars"></i></a>
   </div>
   <!-- /Header -->

   <!-- Sidebar -->
   <div class="sidebar" id="sidebar">
      <div class="sidebar-inner slimscroll">
         <div id="sidebar-menu" class="sidebar-menu">
            <ul>
               <li class="menu-title"><span>Main Menu</span></li>
               <li class="submenu active">
                  <a href="#"><i class="fas fa-building"></i> <span> Departments</span> <span class="menu-arrow"></span></a>
                  <ul>
                     <li><a href="{% url 'department:list-department' %}" class="active">Department List</a></li>
                     <li><a href="{% url 'department:add-department' %}">Add Department</a></li>
                  </ul>
               </li>
            </ul>
         </div>
      </div>
   </div>
   <!-- /Sidebar -->

   <!-- Page Content -->
   <div class="page-wrapper">
      <div class="content container-fluid">

         <div class="page-header">
            <div class="row align-items-center">
               <div class="col">
                  <h3 class="page-title">Departments</h3>
                  <ul class="breadcrumb">
                     <li class="breadcrumb-item"><a href="{% url 'school:index' %}">Dashboard</a></li>
                     <li class="breadcrumb-item active">Departments</li>
                  </ul>
               </div>
               <div class="col-auto text-right ml-auto">
                  <a href="#" class="btn btn-outline-primary mr-2"><i class="fas fa-download"></i> Download</a>
                  <a href="{% url 'department:add-department' %}" class="btn btn-primary"><i class="fas fa-plus"></i></a>
               </div>
            </div>
         </div>

         {% if messages %}
            {% for message in messages %}
               <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
         {% endif %}

         <div class="row">
            <div class="col-sm-12">
               <div class="card card-table">
                  <div class="card-body">
                     <div class="table-responsive">
                        <table class="table table-hover table-center mb-0">
                           <thead>
                              <tr>
                                 <th>ID</th>
                                 <th>Name</th>
                                 <th>HOD</th>
                                 <th>Started Year</th>
                                 <th>No of Students</th>
                                 <th class="text-right">Action</th>
                              </tr>
                           </thead>
                           <tbody>
                              {% for department in departments %}
                              <tr>
                                 <td>{{ department.pk }}</td>
                                 <td><h2><a>{{ department.name }}</a></h2></td>
                                 <td>{{ department.head_of_department }}</td>
                                 <td>{{ department.department_start_date|date:"Y" }}</td>
                                 <td>{{ department.number_of_student }}</td>
                                 <td class="text-right">
                                    <div class="actions">
                                       <a href="{% url 'department:edit-department' department.pk %}" class="btn btn-sm bg-success-light mr-2">
                                          <i class="fas fa-pen"></i>
                                       </a>
                                       <a href="{% url 'department:delete-department' department.pk %}" class="btn btn-sm bg-danger-light" onclick="return confirm('Are you sure you want to delete this department?');">
                                          <i class="fas fa-trash"></i>
                                       </a>
                                    </div>
                                 </td>
                              </tr>
                              {% empty %}
                              <tr>
                                 <td colspan="6" class="text-center">No departments found.</td>
                              </tr>
                              {% endfor %}
                           </tbody>
                        </table>

                        <!-- Pagination -->
                        {% if departments.paginator.num_pages > 1 %}
                        <nav class="mt-3">
                           <ul class="pagination justify-content-center">
                              {% if departments.has_previous %}
                                 <li class="page-item"><a class="page-link" href="?page=1">First</a></li>
                                 <li class="page-item"><a class="page-link" href="?page={{ departments.previous_page_number }}">Previous</a></li>
                              {% else %}
                                 <li class="page-item disabled"><span class="page-link">First</span></li>
                                 <li class="page-item disabled"><span class="page-link">Previous</span></li>
                              {% endif %}

                              <li class="page-item active">
                                 <span class="page-link">Page {{ departments.number }} of {{ departments.paginator.num_pages }}</span>
                              </li>

                              {% if departments.has_next %}
                                 <li class="page-item"><a class="page-link" href="?page={{ departments.next_page_number }}">Next</a></li>
                                 <li class="page-item"><a class="page-link" href="?page={{ departments.paginator.num_pages }}">Last</a></li>
                              {% else %}
                                 <li class="page-item disabled"><span class="page-link">Next</span></li>
                                 <li class="page-item disabled"><span class="page-link">Last</span></li>
                              {% endif %}
                           </ul>
                        </nav>
                        {% endif %}

                     </div>
                  </div>
               </div>
            </div>
         </div>

      </div>
   </div>
   <!-- /Page Content -->

   <footer>
      <p>Copyright Â© 2025 Dreamguys.</p>
   </footer>

</div>

<!-- Scripts -->
<script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'assets/js/popper.min.js' %}"></script>
<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
<script src="{% static 'assets/js/script.js' %}"></script>
</body>
</html>
